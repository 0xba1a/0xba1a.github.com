
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Bala">
      
      
        <link rel="canonical" href="https://eastrivervillage.com/blog/page/20/">
      
      
        <link rel="prev" href="../../..">
      
      
        <link rel="next" href="../../tags/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../images/fabicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Blog - East River Village</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-3JJ45DK8YN"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-3JJ45DK8YN",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-3JJ45DK8YN",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#blog" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://eastrivervillage.com" title="East River Village" class="md-header__button md-logo" aria-label="East River Village" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.41 7.41 15 12l-4.59 4.6L9 15.18 12.18 12 9 8.82M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            East River Village
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Blog
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m3.55 19.09 1.41 1.41 1.8-1.79-1.42-1.42M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.71 1.8 1.79 1.41-1.41-1.79-1.8M20.45 5l-1.41-1.4-1.8 1.79 1.42 1.42M13 1h-2v3h2M6.76 5.39 4.96 3.6 3.55 5l1.79 1.81zM1 13h3v-2H1m12 9h-2v3h2"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07zm-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13zm-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87zM19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35zm4.33-2.7 1.15-2.77 2.2 2.54zm1.15-4.96-1.14-2.78 3.34.24zM9.63 18.93l2.77 1.15-2.53 2.19z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://eastrivervillage.com" title="East River Village" class="md-nav__button md-logo" aria-label="East River Village" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.41 7.41 15 12l-4.59 4.6L9 15.18 12.18 12 9 8.82M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/></svg>

    </a>
    East River Village
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.41 7.41 15 12l-4.59 4.6L9 15.18 12.18 12 9 8.82M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/></svg>
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tags/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.41 7.41 15 12l-4.59 4.6L9 15.18 12.18 12 9 8.82M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/></svg>
  
  <span class="md-ellipsis">
    Tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2025/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.41 7.41 15 12l-4.59 4.6L9 15.18 12.18 12 9 8.82M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/></svg>
  
  <span class="md-ellipsis">
    September 2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2021/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.41 7.41 15 12l-4.59 4.6L9 15.18 12.18 12 9 8.82M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/></svg>
  
  <span class="md-ellipsis">
    July 2021
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2020/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.41 7.41 15 12l-4.59 4.6L9 15.18 12.18 12 9 8.82M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/></svg>
  
  <span class="md-ellipsis">
    November 2020
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2019/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.41 7.41 15 12l-4.59 4.6L9 15.18 12.18 12 9 8.82M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/></svg>
  
  <span class="md-ellipsis">
    June 2019
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2018/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.41 7.41 15 12l-4.59 4.6L9 15.18 12.18 12 9 8.82M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/></svg>
  
  <span class="md-ellipsis">
    October 2018
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2017/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.41 7.41 15 12l-4.59 4.6L9 15.18 12.18 12 9 8.82M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/></svg>
  
  <span class="md-ellipsis">
    September 2017
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-linux-cow" class="md-nav__link">
    <span class="md-ellipsis">
      The Linux COW
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="blog">Blog</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="../../../assets/author_image.jpg" alt="Bala">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2018-03-05 21:59:30+00:00">March 5, 2018</time></li>
        
        
          
          <li class="md-meta__item">
            
              8 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="the-linux-cow"><a class="toclink" href="../../2018/03/05/the-linux-cow/">The Linux COW</a></h2>
<p>In our <a href="../../2018/03/02/virtual-memory-to-physical-memory/">last post</a> we have seen how to get the physical memory address using a virtual memory address. In this post lets try to check Copy on Write(<em>COW</em> from here) implemented by Linux. For those who try to recollect what is COW, on <code>fork()</code>, Linux will not immediately replicate the address space of parent process. As the child process is most-likely to load a new binary, copying the current process's address space will be of no use in many cases. So unless a write occurs (either by the parent process or by the child process), the physical address space mapped to both processes' virtual address space will be same. Please go through <a href="https://en.wikipedia.org/wiki/Copy-on-write">Wikipedia</a> if you still have no clue.</p>
<p>So lets write a C program that forks itself and check whether both are sharing the physical address space. We are going to reuse the <code>get_paddr.c</code> function we wrote in our <a href="../../2018/03/02/virtual-memory-to-physical-memory/">previous post</a> to get the physical memory address.
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span><span class="c1"> /* fork() */</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>

<span class="w">    </span><span class="n">fork</span><span class="p">();</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;my pid is %d, and the address to work is 0x%lx</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">getpid</span><span class="p">(),</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="p">)</span><span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>
<span class="w">    </span><span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></p>
<p>Execute this program in one console and while it is waiting for the user input, go to the next console and get the physical address of variable <code>a</code> using our <code>get_paddr</code> binary.
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>gcc<span class="w"> </span>specimen.c<span class="w"> </span>-o<span class="w"> </span>specimen
$<span class="w"> </span>./specimen
my<span class="w"> </span>pid<span class="w"> </span>is<span class="w"> </span><span class="m">5912</span>,<span class="w"> </span>and<span class="w"> </span>the<span class="w"> </span>address<span class="w"> </span>to<span class="w"> </span>work<span class="w"> </span>is<span class="w"> </span>0x7ffd055923e4
my<span class="w"> </span>pid<span class="w"> </span>is<span class="w"> </span><span class="m">5913</span>,<span class="w"> </span>and<span class="w"> </span>the<span class="w"> </span>address<span class="w"> </span>to<span class="w"> </span>work<span class="w"> </span>is<span class="w"> </span>0x7ffd055923e4
</code></pre></div>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>./get_paddr<span class="w"> </span><span class="m">5912</span><span class="w"> </span>0x7ffd055923e4
getting<span class="w"> </span>page<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>virtual<span class="w"> </span>address<span class="w"> </span><span class="m">140724693181412</span><span class="w"> </span>of<span class="w"> </span>process<span class="w"> </span><span class="m">5912</span>
opening<span class="w"> </span>pagemap<span class="w"> </span>/proc/5912/pagemap
moving<span class="w"> </span>to<span class="w"> </span><span class="m">274852916368</span>
physical<span class="w"> </span>frame<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x509c9
physical<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x509c93e4
$
$<span class="w"> </span>sudo<span class="w"> </span>./get_paddr<span class="w"> </span><span class="m">5913</span><span class="w"> </span>0x7ffd055923e4
getting<span class="w"> </span>page<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>virtual<span class="w"> </span>address<span class="w"> </span><span class="m">140724693181412</span><span class="w"> </span>of<span class="w"> </span>process<span class="w"> </span><span class="m">5913</span>
opening<span class="w"> </span>pagemap<span class="w"> </span>/proc/5913/pagemap
moving<span class="w"> </span>to<span class="w"> </span><span class="m">274852916368</span>
physical<span class="w"> </span>frame<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x64d2a
physical<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x64d2a3e4
$
</code></pre></div></p>
<p><strong>OOPS!</strong> The physical address is not same! How? Why? What's wrong? As per my beloved <em>Robert Love's Linux System Programming</em> book, the physical memory copy will occur only when a write occurs.</p>
<p _="%" endblockquote="endblockquote">{% blockquote Robert Love , Linux System Programming %}
The MMU can intercept the write operation and raise an exception; the kernel, in response, will transparently create a new copy of the page for the writing process, and allow the write to continue against the new page. We call this approach *copy-on-write(COW). Effectively, processes are allowed read access to shared data, which saves space. But when a process wants to write to a shared page, it receives a unique copy of that page on fly, thereby allowing the kernel to act as if the process always had its own private copy. As copy-on write occurs on a page-by-page basis, with the technique a huge file may be efficiently shared among many processes, and the individual processes will receive unique physical pages only for those pages to which thy themselves write.</p>
<p>It is so clear that in our program <code>specimen.c</code> we never write to the only variable <code>a</code> unless the <code>scanf</code> completes. But we tested the <em>COW</em> before input-ing to the <code>scanf</code>. So by the time there would be no write and as per the design of <em>COW</em> physical memory space should be shared across both parent and child. Even though we have written the program carefully, sometimes the libraries, compiler and even the OS will act intelligently (stupid! They themselves says it) and fills us with surprise. So lets run the handy <code>strace</code> on our <code>specimen</code> binary to see what it actually does.
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>strace<span class="w"> </span>./specimen
execve<span class="o">(</span><span class="s2">&quot;./specimen&quot;</span>,<span class="w"> </span><span class="o">[</span><span class="s2">&quot;./specimen&quot;</span><span class="o">]</span>,<span class="w"> </span><span class="o">[</span>/*<span class="w"> </span><span class="m">47</span><span class="w"> </span>vars<span class="w"> </span>*/<span class="o">])</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
brk<span class="o">(</span>NULL<span class="o">)</span><span class="w">                               </span><span class="o">=</span><span class="w"> </span>0x55de17b57000
access<span class="o">(</span><span class="s2">&quot;/etc/ld.so.nohwcap&quot;</span>,<span class="w"> </span>F_OK<span class="o">)</span><span class="w">      </span><span class="o">=</span><span class="w"> </span>-1<span class="w"> </span>ENOENT<span class="w"> </span><span class="o">(</span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory<span class="o">)</span>
access<span class="o">(</span><span class="s2">&quot;/etc/ld.so.preload&quot;</span>,<span class="w"> </span>R_OK<span class="o">)</span><span class="w">      </span><span class="o">=</span><span class="w"> </span>-1<span class="w"> </span>ENOENT<span class="w"> </span><span class="o">(</span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory<span class="o">)</span>
openat<span class="o">(</span>AT_FDCWD,<span class="w"> </span><span class="s2">&quot;/etc/ld.so.cache&quot;</span>,<span class="w"> </span>O_RDONLY<span class="p">|</span>O_CLOEXEC<span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span>
fstat<span class="o">(</span><span class="m">3</span>,<span class="w"> </span><span class="o">{</span><span class="nv">st_mode</span><span class="o">=</span>S_IFREG<span class="p">|</span><span class="m">0644</span>,<span class="w"> </span><span class="nv">st_size</span><span class="o">=</span><span class="m">94696</span>,<span class="w"> </span>...<span class="o">})</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
mmap<span class="o">(</span>NULL,<span class="w"> </span><span class="m">94696</span>,<span class="w"> </span>PROT_READ,<span class="w"> </span>MAP_PRIVATE,<span class="w"> </span><span class="m">3</span>,<span class="w"> </span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>0x7fdbad5b8000
close<span class="o">(</span><span class="m">3</span><span class="o">)</span><span class="w">                                </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
access<span class="o">(</span><span class="s2">&quot;/etc/ld.so.nohwcap&quot;</span>,<span class="w"> </span>F_OK<span class="o">)</span><span class="w">      </span><span class="o">=</span><span class="w"> </span>-1<span class="w"> </span>ENOENT<span class="w"> </span><span class="o">(</span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory<span class="o">)</span>
openat<span class="o">(</span>AT_FDCWD,<span class="w"> </span><span class="s2">&quot;/lib/x86_64-linux-gnu/libc.so.6&quot;</span>,<span class="w"> </span>O_RDONLY<span class="p">|</span>O_CLOEXEC<span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span>
read<span class="o">(</span><span class="m">3</span>,<span class="w"> </span><span class="s2">&quot;\177ELF\2\1\1\3\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0\340\22\2\0\0\0\0\0&quot;</span>...,<span class="w"> </span><span class="m">832</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">832</span>
fstat<span class="o">(</span><span class="m">3</span>,<span class="w"> </span><span class="o">{</span><span class="nv">st_mode</span><span class="o">=</span>S_IFREG<span class="p">|</span><span class="m">0755</span>,<span class="w"> </span><span class="nv">st_size</span><span class="o">=</span><span class="m">1960656</span>,<span class="w"> </span>...<span class="o">})</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
mmap<span class="o">(</span>NULL,<span class="w"> </span><span class="m">8192</span>,<span class="w"> </span>PROT_READ<span class="p">|</span>PROT_WRITE,<span class="w"> </span>MAP_PRIVATE<span class="p">|</span>MAP_ANONYMOUS,<span class="w"> </span>-1,<span class="w"> </span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>0x7fdbad5b6000
mmap<span class="o">(</span>NULL,<span class="w"> </span><span class="m">4061792</span>,<span class="w"> </span>PROT_READ<span class="p">|</span>PROT_EXEC,<span class="w"> </span>MAP_PRIVATE<span class="p">|</span>MAP_DENYWRITE,<span class="w"> </span><span class="m">3</span>,<span class="w"> </span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>0x7fdbacfc9000
mprotect<span class="o">(</span>0x7fdbad19f000,<span class="w"> </span><span class="m">2097152</span>,<span class="w"> </span>PROT_NONE<span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
mmap<span class="o">(</span>0x7fdbad39f000,<span class="w"> </span><span class="m">24576</span>,<span class="w"> </span>PROT_READ<span class="p">|</span>PROT_WRITE,<span class="w"> </span>MAP_PRIVATE<span class="p">|</span>MAP_FIXED<span class="p">|</span>MAP_DENYWRITE,
<span class="w">        </span><span class="m">3</span>,<span class="w"> </span>0x1d6000<span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>0x7fdbad39f000
mmap<span class="o">(</span>0x7fdbad3a5000,<span class="w"> </span><span class="m">14944</span>,<span class="w"> </span>PROT_READ<span class="p">|</span>PROT_WRITE,<span class="w"> </span>MAP_PRIVATE<span class="p">|</span>MAP_FIXED<span class="p">|</span>MAP_ANONYMOUS,
<span class="w">        </span>-1,<span class="w"> </span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>0x7fdbad3a5000
close<span class="o">(</span><span class="m">3</span><span class="o">)</span><span class="w">                                </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
arch_prctl<span class="o">(</span>ARCH_SET_FS,<span class="w"> </span>0x7fdbad5b7500<span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
mprotect<span class="o">(</span>0x7fdbad39f000,<span class="w"> </span><span class="m">16384</span>,<span class="w"> </span>PROT_READ<span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
mprotect<span class="o">(</span>0x55de15e94000,<span class="w"> </span><span class="m">4096</span>,<span class="w"> </span>PROT_READ<span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
mprotect<span class="o">(</span>0x7fdbad5d0000,<span class="w"> </span><span class="m">4096</span>,<span class="w"> </span>PROT_READ<span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
munmap<span class="o">(</span>0x7fdbad5b8000,<span class="w"> </span><span class="m">94696</span><span class="o">)</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
clone<span class="o">(</span><span class="nv">child_stack</span><span class="o">=</span>NULL,<span class="w"> </span><span class="nv">flags</span><span class="o">=</span>CLONE_CHILD_CLEARTID<span class="p">|</span>CLONE_CHILD_SETTID<span class="p">|</span>SIGCHLD,
<span class="w">        </span><span class="nv">child_tidptr</span><span class="o">=</span>0x7fdbad5b77d0<span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5932</span>
getpid<span class="o">()</span><span class="w">                                </span><span class="o">=</span><span class="w"> </span><span class="m">5931</span>
fstat<span class="o">(</span><span class="m">1</span>,<span class="w"> </span><span class="o">{</span><span class="nv">st_mode</span><span class="o">=</span>S_IFCHR<span class="p">|</span><span class="m">0620</span>,<span class="w"> </span><span class="nv">st_rdev</span><span class="o">=</span>makedev<span class="o">(</span><span class="m">136</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span>...<span class="o">})</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
my<span class="w"> </span>pid<span class="w"> </span>is<span class="w"> </span><span class="m">5932</span>,<span class="w"> </span>and<span class="w"> </span>the<span class="w"> </span>address<span class="w"> </span>to<span class="w"> </span>work<span class="w"> </span>is<span class="w"> </span>0x7fff9823b814
brk<span class="o">(</span>NULL<span class="o">)</span><span class="w">                               </span><span class="o">=</span><span class="w"> </span>0x55de17b57000
brk<span class="o">(</span>0x55de17b78000<span class="o">)</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span>0x55de17b78000
write<span class="o">(</span><span class="m">1</span>,<span class="w"> </span><span class="s2">&quot;my pid is 5931, and the address &quot;</span>...,<span class="w"> </span>58my<span class="w"> </span>pid<span class="w"> </span>is<span class="w"> </span><span class="m">5931</span>,<span class="w"> </span>and<span class="w"> </span>the<span class="w"> </span>address
<span class="w">        </span>to<span class="w"> </span>work<span class="w"> </span>is<span class="w"> </span>0x7fff9823b814
<span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">58</span>
fstat<span class="o">(</span><span class="m">0</span>,<span class="w"> </span><span class="o">{</span><span class="nv">st_mode</span><span class="o">=</span>S_IFCHR<span class="p">|</span><span class="m">0620</span>,<span class="w"> </span><span class="nv">st_rdev</span><span class="o">=</span>makedev<span class="o">(</span><span class="m">136</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span>...<span class="o">})</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
read<span class="o">(</span><span class="m">0</span>,
</code></pre></div></p>
<p>As the program is waiting on <code>scanf</code>, it is waiting for user input in <code>read</code> system-call from <code>fd 0</code>, <code>stdin</code>. But the surprise part here is the <code>clone</code> system call. If you don't remember, read the <code>specimen.c</code> program once again. We never used the <code>clone</code> system call. And where is the <code>fork</code>? It seems <code>glibc</code> does something in a so called <em>intelligent</em> way. Lets read the <code>man pages</code> once again for pointers.
<div class="highlight"><pre><span></span><code>C<span class="w"> </span>library/kernel<span class="w"> </span>differences
<span class="w">       </span>Since<span class="w">  </span>version<span class="w">  </span><span class="m">2</span>.3.3,<span class="w"> </span>rather<span class="w"> </span>than<span class="w"> </span>invoking<span class="w"> </span>the<span class="w"> </span>kernel<span class="err">&#39;</span>s<span class="w"> </span>fork<span class="o">()</span><span class="w"> </span>system<span class="w"> </span>call,
<span class="w">       </span>the<span class="w"> </span>glibc<span class="w"> </span>fork<span class="o">()</span><span class="w"> </span>wrapper<span class="w"> </span>that<span class="w"> </span>is<span class="w"> </span>provided<span class="w"> </span>as<span class="w"> </span>part<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>NPTL<span class="w"> </span>threading
<span class="w">       </span>implementation<span class="w"> </span>invokes<span class="w"> </span>clone<span class="o">(</span><span class="m">2</span><span class="o">)</span><span class="w"> </span>with<span class="w"> </span>flags<span class="w"> </span>that<span class="w"> </span>provide<span class="w"> </span>the<span class="w"> </span>same<span class="w"> </span>effect<span class="w"> </span>as
<span class="w">       </span>the<span class="w"> </span>traditional<span class="w"> </span>system<span class="w"> </span>call.<span class="w">  </span><span class="o">(</span>A<span class="w"> </span>call<span class="w"> </span>to<span class="w"> </span>fork<span class="o">()</span><span class="w"> </span>is<span class="w"> </span>equivalent<span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span>call<span class="w"> </span>to
<span class="w">       </span>clone<span class="o">(</span><span class="m">2</span><span class="o">)</span><span class="w"> </span>specifying<span class="w"> </span>flags<span class="w"> </span>as<span class="w"> </span>just<span class="w">  </span>SIGCHLD.<span class="o">)</span><span class="w"> </span>The<span class="w"> </span>glibc<span class="w"> </span>wrapper<span class="w"> </span>invokes<span class="w"> </span>any
<span class="w">       </span>fork<span class="w"> </span>handlers<span class="w"> </span>that<span class="w"> </span>have<span class="w"> </span>been<span class="w"> </span>established<span class="w"> </span>using<span class="w"> </span>pthread_atfork<span class="o">(</span><span class="m">3</span><span class="o">)</span>.
</code></pre></div></p>
<p>Doesn't look completely true. Though the <code>man page</code> says it calls <code>clone()</code> with flags as just <code>SIGCHLD</code>, <code>strace</code> uncovers the dirty truth - <code>flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD</code>. Nobody escapes from an armed system programmer.  Anyway this explains <code>clone</code> but no-<code>fork</code> surprise. But where comes the write that causes <code>COW</code>. See the last argument of <code>clone()</code> in <code>strace</code>, <code>child_tidptr=0x7fdbad5b77d0</code> some place holder stack variable passed to be filled. And what about the two flags other than <code>SIGCHLD</code>? Lets go to the <code>man pages</code> once again, but for <code>clone()</code> this time.
<div class="highlight"><pre><span></span><code><span class="w">    </span>CLONE_CHILD_CLEARTID<span class="w"> </span><span class="o">(</span>since<span class="w"> </span>Linux<span class="w"> </span><span class="m">2</span>.5.49<span class="o">)</span>
<span class="w">        </span>Clear<span class="w"> </span><span class="o">(</span>zero<span class="o">)</span><span class="w"> </span>the<span class="w"> </span>child<span class="w"> </span>thread<span class="w"> </span>ID<span class="w"> </span>at<span class="w"> </span>the<span class="w"> </span>location<span class="w"> </span>ctid<span class="w"> </span><span class="k">in</span><span class="w"> </span>child<span class="w"> </span>memory<span class="w"> </span>when
<span class="w">        </span>the<span class="w"> </span>child<span class="w"> </span>exits,<span class="w"> </span>and<span class="w"> </span><span class="k">do</span><span class="w"> </span>a<span class="w"> </span>wakeup<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>futex<span class="w"> </span>at<span class="w"> </span>that<span class="w"> </span>address.<span class="w">  </span>The<span class="w"> </span>address
<span class="w">        </span>involved<span class="w">  </span>may<span class="w"> </span>be<span class="w"> </span>changed<span class="w"> </span>by<span class="w"> </span>the<span class="w"> </span>set_tid_address<span class="o">(</span><span class="m">2</span><span class="o">)</span><span class="w"> </span>system<span class="w"> </span>call.<span class="w">  </span>This<span class="w"> </span>is
<span class="w">        </span>used<span class="w"> </span>by<span class="w"> </span>threading<span class="w"> </span>libraries.

<span class="w">    </span>CLONE_CHILD_SETTID<span class="w"> </span><span class="o">(</span>since<span class="w"> </span>Linux<span class="w"> </span><span class="m">2</span>.5.49<span class="o">)</span>
<span class="w">        </span>Store<span class="w"> </span>the<span class="w"> </span>child<span class="w"> </span>thread<span class="w"> </span>ID<span class="w"> </span>at<span class="w"> </span>the<span class="w"> </span>location<span class="w"> </span>ctid<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>child<span class="err">&#39;</span>s<span class="w"> </span>memory.
<span class="w">        </span>The<span class="w"> </span>store<span class="w"> </span>operation<span class="w"> </span>completes<span class="w"> </span>before<span class="w"> </span>clone<span class="o">()</span><span class="w"> </span>returns<span class="w"> </span>control<span class="w"> </span>to<span class="w"> </span>user<span class="w"> </span>space.
</code></pre></div></p>
<p>Ahh! The culprit is <code>CLONE_CHILD_SETTID</code>. It makes the OS to write thread ID of the child into its memory region. This write triggers the <code>COW</code> and gets the child a fresh copy of physical memory. Sorry Linux, I doubted you.</p>
<p>Okay. Lets modify our <code>specimen</code> with <code>clone()</code> and no <code>CLONE_CHILD_SETTID</code> flag.
<div class="highlight"><pre><span></span><code><span class="cm">/* clone() */</span>
<span class="cp">#define _GNU_SOURCE</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sched.h&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>

<span class="cm">/* getpid() */</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sys/types.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;signal.h&gt;</span><span class="c1"> /* SIGCHLD */</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="c1"> /* malloc() */</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">arg</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;my pid is %d and address to check is 0x%lx</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">getpid</span><span class="p">(),</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="p">)</span><span class="w"> </span><span class="n">arg</span><span class="p">);</span>
<span class="w">    </span><span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">arg</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">stack_ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stack_ptr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;No virtual memory available</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="cm">/*fork();*/</span>

<span class="w">    </span><span class="n">clone</span><span class="p">(</span><span class="n">run</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">stack_ptr</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span><span class="w"> </span><span class="n">CLONE_CHILD_CLEARTID</span><span class="o">|</span><span class="n">SIGCHLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">        </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;clone failed. &quot;</span><span class="p">);</span>

<span class="w">    </span><span class="n">run</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></p>
<p>Unlike <code>fork()</code>, <code>clone()</code> doesn't start the execution of child from the point where it returns.Instead it takes a function as an argument and runs the function in child process. Here we are passing <code>run()</code> function which prints the <code>pid</code> and <code>virtual address</code> of the variable <code>a</code>. After <code>clone()</code> the parent also calls the function <code>run()</code> so that we'll get the <code>pid</code> of parent process.</p>
<p>Have you noted the second argument of <code>clone()</code>? It is the <code>stack</code> where child is going to execute. Again unlike <code>fork()</code>, <code>clone()</code> allows parent and child to share their resources like memory, signal handlers, open file descriptors, etc. As both cannot run in same <code>stack</code>, the parent process must allocate some space and give it to the child to use it as stack. <code>stack</code> grows downwards on all processors that run Linux, so the child-stack should point out to the topmost address of the memory region. That's why we are passing the end of <code>malloc</code>ed memory. Lets execute the program and see whether both process share the same physical memory space.
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./specimen
my<span class="w"> </span>pid<span class="w"> </span>is<span class="w"> </span><span class="m">3129</span><span class="w"> </span>and<span class="w"> </span>address<span class="w"> </span>to<span class="w"> </span>check<span class="w"> </span>is<span class="w"> </span>0x7fff396fdd6c
my<span class="w"> </span>pid<span class="w"> </span>is<span class="w"> </span><span class="m">3130</span><span class="w"> </span>and<span class="w"> </span>address<span class="w"> </span>to<span class="w"> </span>check<span class="w"> </span>is<span class="w"> </span>0x7fff396fdd6c
</code></pre></div>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>./get_paddr<span class="w"> </span><span class="m">3129</span><span class="w"> </span>0x7fff396fdd6c
getting<span class="w"> </span>page<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>virtual<span class="w"> </span>address<span class="w"> </span><span class="m">140734157020524</span><span class="w"> </span>of<span class="w"> </span>process<span class="w"> </span><span class="m">3129</span>
opening<span class="w"> </span>pagemap<span class="w"> </span>/proc/3129/pagemap
moving<span class="w"> </span>to<span class="w"> </span><span class="m">274871400424</span>
physical<span class="w"> </span>frame<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x5e35a
physical<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x5e35ad6c
$
$<span class="w"> </span>sudo<span class="w"> </span>./get_paddr<span class="w"> </span><span class="m">3130</span><span class="w"> </span>0x7fff396fdd6c
getting<span class="w"> </span>page<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>virtual<span class="w"> </span>address<span class="w"> </span><span class="m">140734157020524</span><span class="w"> </span>of<span class="w"> </span>process<span class="w"> </span><span class="m">3130</span>
opening<span class="w"> </span>pagemap<span class="w"> </span>/proc/3130/pagemap
moving<span class="w"> </span>to<span class="w"> </span><span class="m">274871400424</span>
physical<span class="w"> </span>frame<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x6a7cd
physical<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x6a7cdd6c
$
</code></pre></div></p>
<p>Different again! Linux can't be wrong. We should make sure we didn't mess-up anything. Are we sure there will be no write in stack after <code>clone()</code> call?
 * The child's execution starts at function <code>run()</code>
 * No variables are written until <code>scanf()</code> returns. Okay we'll complete our examination before providing any input.
 * But the functions? OOPS! After clone, parent calls <code>run()</code> and then <code>printf()</code> but child calls <code>printf()</code> directly. All these function calls will make write in stack which triggers <em>COW</em>.</p>
<p>Lets come-up with a different C-program with no function calls after <code>clone()</code> in both parent and child.</p>
<p><div class="highlight"><pre><span></span><code><span class="cm">/* clone() */</span>
<span class="cp">#define _GNU_SOURCE</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sched.h&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>

<span class="cm">/* getpid() */</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sys/types.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;signal.h&gt;</span><span class="c1"> /* SIGCHLD */</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="c1"> /* malloc() */</span>

<span class="cp">#define STACK_LENGTH (1024*1024)</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">arg</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">arg</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">stack_ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">STACK_LENGTH</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stack_ptr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;No virtual memory available</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="cm">/*fork();*/</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;my pid is %d and address to check is 0x%lx</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">getpid</span><span class="p">(),</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>
<span class="w">    </span><span class="n">clone</span><span class="p">(</span><span class="n">run</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">stack_ptr</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">STACK_LENGTH</span><span class="p">),</span><span class="w"> </span><span class="n">CLONE_CHILD_CLEARTID</span><span class="o">|</span><span class="n">SIGCHLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">        </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;clone failed. &quot;</span><span class="p">);</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
We are not printing anything after <code>clone()</code> to avoid stack overwrite. So we have to assume the child process's <code>pid</code> is parent <code>pid</code> + 1. This assumption is true most of the times. And we use infinite <code>while</code> loop to pause both processes. Loops use <code>jump</code> statements. So they will not cause any stack write. So this time we should see same physical address has been used by both processes. Lets see.
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./specimen
my<span class="w"> </span>pid<span class="w"> </span>is<span class="w"> </span><span class="m">3436</span><span class="w"> </span>and<span class="w"> </span>address<span class="w"> </span>to<span class="w"> </span>check<span class="w"> </span>is<span class="w"> </span>0x7fffa920c1ec
</code></pre></div>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>./get_paddr<span class="w"> </span><span class="m">3436</span><span class="w"> </span>0x7fffa920c1ec
getting<span class="w"> </span>page<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>virtual<span class="w"> </span>address<span class="w"> </span><span class="m">140736030884332</span><span class="w"> </span>of<span class="w"> </span>process<span class="w"> </span><span class="m">3436</span>
opening<span class="w"> </span>pagemap<span class="w"> </span>/proc/3436/pagemap
moving<span class="w"> </span>to<span class="w"> </span><span class="m">274875060320</span>
physical<span class="w"> </span>frame<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x67337
physical<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x673371ec
$
$<span class="w"> </span>sudo<span class="w"> </span>./get_paddr<span class="w"> </span><span class="m">3437</span><span class="w"> </span>0x7fffa920c1ec
getting<span class="w"> </span>page<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>virtual<span class="w"> </span>address<span class="w"> </span><span class="m">140736030884332</span><span class="w"> </span>of<span class="w"> </span>process<span class="w"> </span><span class="m">3437</span>
opening<span class="w"> </span>pagemap<span class="w"> </span>/proc/3437/pagemap
moving<span class="w"> </span>to<span class="w"> </span><span class="m">274875060320</span>
physical<span class="w"> </span>frame<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x67337
physical<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x673371ec
</code></pre></div></p>
<p>GREAT! At last we conquered. We saw the evidence of our beloved <em>COW</em>. Now I can sleep peacefully.</p>
<h4 id="for-pure-engineer"><a class="toclink" href="../../2018/03/05/the-linux-cow/#for-pure-engineer">For pure Engineer</a></h4>
<p>Still I feel the urge to make a stack write in child process and see the physical address change. For those curious people out there who want to see the things break, lets run it one more time. Change the <code>run()</code> function as follows and execute <code>specimen.c</code>.
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">arg</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">arg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="c1">//stack write</span>
<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">arg</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./specimen
my<span class="w"> </span>pid<span class="w"> </span>is<span class="w"> </span><span class="m">3549</span><span class="w"> </span>and<span class="w"> </span>address<span class="w"> </span>to<span class="w"> </span>check<span class="w"> </span>is<span class="w"> </span>0x7ffdd8e1e9ac
</code></pre></div>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>./get_paddr<span class="w"> </span><span class="m">3549</span><span class="w"> </span>0x7ffdd8e1e9ac
getting<span class="w"> </span>page<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>virtual<span class="w"> </span>address<span class="w"> </span><span class="m">140728242137516</span><span class="w"> </span>of<span class="w"> </span>process<span class="w"> </span><span class="m">3549</span>
opening<span class="w"> </span>pagemap<span class="w"> </span>/proc/3549/pagemap
moving<span class="w"> </span>to<span class="w"> </span><span class="m">274859847920</span>
physical<span class="w"> </span>frame<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x634e6
physical<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x634e69ac
$
$<span class="w"> </span>sudo<span class="w"> </span>./get_paddr<span class="w"> </span><span class="m">3550</span><span class="w"> </span>0x7ffdd8e1e9ac
getting<span class="w"> </span>page<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>virtual<span class="w"> </span>address<span class="w"> </span><span class="m">140728242137516</span><span class="w"> </span>of<span class="w"> </span>process<span class="w"> </span><span class="m">3550</span>
opening<span class="w"> </span>pagemap<span class="w"> </span>/proc/3550/pagemap
moving<span class="w"> </span>to<span class="w"> </span><span class="m">274859847920</span>
physical<span class="w"> </span>frame<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x55976
physical<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span>0x559769ac
$
</code></pre></div>
Good Nightzzz...</p>
<div class="flex">
        <script src="https://platform.linkedin.com/in.js" type="text/javascript">lang: en_US</script>
        <script type="IN/Share" data-url="https://eastrivervillage.com/blog/2018/03/05/the-linux-cow/"></script>
    </div>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../../">1</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../18/">18</a> <a class="md-pagination__link" href="../19/">19</a> <span class="md-pagination__current">20</span> <a class="md-pagination__link" href="../21/">21</a> <a class="md-pagination__link" href="../22/">22</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../27/">27</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://www.linkedin.com/in/balakumaran-kannan/" target="_blank" rel="noopener" title="LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/0xba1a" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "content.code.copy", "content.code.select", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>